'use strict';

var chunk4QSNRCOT_cjs = require('./chunk-4QSNRCOT.cjs');
var chunkRE4RPXT2_cjs = require('./chunk-RE4RPXT2.cjs');
var chunkEMMSS5I5_cjs = require('./chunk-EMMSS5I5.cjs');

// src/server/handlers/logs.ts
var logs_exports = {};
chunkEMMSS5I5_cjs.__export(logs_exports, {
  getLogTransports: () => getLogTransports,
  getLogsByRunIdHandler: () => getLogsByRunIdHandler,
  getLogsHandler: () => getLogsHandler
});
async function getLogsHandler({
  mastra,
  transportId,
  params
}) {
  try {
    chunk4QSNRCOT_cjs.validateBody({ transportId });
    const { fromDate, toDate, logLevel, filters: _filters, page, perPage } = params || {};
    const filters = _filters ? Object.fromEntries(
      (Array.isArray(_filters) ? _filters : [_filters]).map((attr) => {
        const [key, value] = attr.split(":");
        return [key, value];
      })
    ) : void 0;
    const logs = await mastra.getLogs(transportId, {
      fromDate,
      toDate,
      logLevel,
      filters,
      page: page ? Number(page) : void 0,
      perPage: perPage ? Number(perPage) : void 0
    });
    return logs;
  } catch (error) {
    return chunkRE4RPXT2_cjs.handleError(error, "Error getting logs");
  }
}
async function getLogsByRunIdHandler({
  mastra,
  runId,
  transportId,
  params
}) {
  try {
    chunk4QSNRCOT_cjs.validateBody({ runId, transportId });
    const { fromDate, toDate, logLevel, filters: _filters, page, perPage } = params || {};
    const filters = _filters ? Object.fromEntries(
      (Array.isArray(_filters) ? _filters : [_filters]).map((attr) => {
        const [key, value] = attr.split(":");
        return [key, value];
      })
    ) : void 0;
    const logs = await mastra.getLogsByRunId({
      runId,
      transportId,
      fromDate,
      toDate,
      logLevel,
      filters,
      page: page ? Number(page) : void 0,
      perPage: perPage ? Number(perPage) : void 0
    });
    return logs;
  } catch (error) {
    return chunkRE4RPXT2_cjs.handleError(error, "Error getting logs by run ID");
  }
}
async function getLogTransports({ mastra }) {
  try {
    const logger = mastra.getLogger();
    const transports = logger.getTransports();
    return {
      transports: transports ? [...transports.keys()] : []
    };
  } catch (error) {
    return chunkRE4RPXT2_cjs.handleError(error, "Error getting log Transports");
  }
}

exports.getLogTransports = getLogTransports;
exports.getLogsByRunIdHandler = getLogsByRunIdHandler;
exports.getLogsHandler = getLogsHandler;
exports.logs_exports = logs_exports;
//# sourceMappingURL=chunk-NPE3X7FQ.cjs.map
//# sourceMappingURL=chunk-NPE3X7FQ.cjs.map